<!DOCTYPE html>
<html lang="es">
<head>
  <!-- GA -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D5YSD14H3P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D5YSD14H3P');
  </script>

  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ES Finds ‚Äì Mejores Ofertas de Amazon</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

<style>
:root{--dark:#111827;--accent:#f97316;--soft:#ffedd5}
.product-card{border:1px solid #e5e7eb;border-radius:16px;overflow:hidden;background:#fff;transition:.25s}
.product-card:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,.08)}
.badge{position:absolute;top:10px;left:10px;background:var(--accent);color:#fff;font-size:11px;font-weight:800;padding:4px 8px;border-radius:999px}
.badge-right{right:10px;left:auto;background:#000;font-size:10px}
.cta{background:var(--dark);color:var(--accent);font-weight:800;padding:10px;border-radius:10px;text-align:center}
.price{background:var(--soft);color:#9a3412;font-size:12px;font-weight:700;padding:4px 8px;border-radius:8px}
</style>
</head>

<body class="bg-slate-50">

<div class="bg-slate-800 text-slate-300 text-[10px] py-1 text-center">
  Como afiliado de Amazon, obtengo ingresos por compras adscritas.
</div>

<nav class="bg-white border-b px-4 py-3 sticky top-0 z-50">
  <div class="max-w-7xl mx-auto flex items-center gap-2">
    <i class="fa-solid fa-bag-shopping text-orange-500 text-2xl"></i>
    <span class="text-xl font-extrabold">ES<span class="text-orange-500">FINDS</span></span>
  </div>
</nav>

<main class="max-w-7xl mx-auto px-4 py-8">
  <h2 class="text-xl font-black mb-6">üî• Ofertas destacadas</h2>
  <div id="product-grid" class="grid grid-cols-2 md:grid-cols-4 xl:grid-cols-5 gap-4"></div>
</main>

<script>
/* ===== OneLink ===== */
const TRACK_ID = "site_esfinds-20";
function buildLink(asin){
  return `https://www.amazon.com/dp/${asin}?tag=${TRACK_ID}`;
}

async function init(){
  const res = await fetch("products_data_v.json");
  const products = await res.json();

  products.sort((a,b)=>new Date(b.updated_at)-new Date(a.updated_at));

  const grid = document.getElementById("product-grid");

  products.forEach(p=>{
    const div = document.createElement("div");
    div.className = "product-card";

    div.innerHTML = `
      <div class="relative bg-slate-100 aspect-square">
        <span class="badge">-${p.discount_percent}%</span>
        <span class="badge badge-right">Amazon</span>
        <a href="${buildLink(p.asin)}" target="_blank">
          <img src="${p.main_image}" class="w-full h-full object-contain p-6">
        </a>
      </div>

      <div class="p-4 flex flex-col gap-2">
        <h3 class="text-sm font-bold line-clamp-3">${p.title}</h3>

        <div class="flex items-center justify-between text-xs">
          <span class="price">${p.currency}${p.price_discount}</span>
          <span class="line-through text-slate-400">${p.currency}${p.price_original}</span>
        </div>

        <div class="text-[11px] text-slate-500">
          ‚≠ê ${p.review_rating} (${p.review_count})
          ${p.coupon_type ? " ¬∑ " + p.coupon_type : ""}
        </div>

        <a href="${buildLink(p.asin)}" target="_blank" class="cta">
          Ver oferta
        </a>
      </div>
    `;
    grid.appendChild(div);
  });
}

init();
</script>

</body>
</html>
